{"ast":null,"code":"import { setLoading, setProducts, setError, setPagination, setFavorites, setFavoritesToggled } from '../slices/product';\nimport axios from 'axios';\nexport const getProducts = (page, favoriteToggle) => async dispatch => {\n  dispatch(setLoading());\n  try {\n    const {\n      data\n    } = await axios.get(`/api/products/${page}/${10}`);\n    const {\n      products,\n      pagination\n    } = data;\n    dispatch(setProducts({\n      products\n    }));\n    dispatch(setPagination({\n      pagination\n    }));\n  } catch (error) {\n    dispatch(setError(error.response && error.response.data.message ? error.response.data.message : error.message ? error.message : 'An expected error has occured. Please try again later.'));\n  }\n};\nexport const addToFavorites = id => async (dispatch, getState) => {\n  const {\n    product: {\n      favorites\n    }\n  } = getState();\n  const newFavorites = [...favorites, id];\n  localStorage.setItem('favorites', JSON.stringify(newFavorites));\n  dispatch(setFavorites(newFavorites));\n};\nexport const removeFromFavorites = id => async (dispatch, getState) => {\n  const {\n    product: {\n      favorites\n    }\n  } = getState();\n  const newFavorites = favorites.filter(favoriteId => favoriteId !== id);\n  localStorage.setItem('favorites', JSON.stringify(newFavorites));\n  dispatch(setFavorites(newFavorites));\n};\nexport const toggleFavorites = toggle => async (dispatch, getState) => {\n  const {\n    product: {\n      favorites,\n      products\n    }\n  } = getState();\n  if (toggle) {\n    const filteredProducts = products.filter(product => favorites.includes(product._id));\n    dispatch(setFavoritesToggled(toggle));\n    dispatch(setProducts({\n      products: filteredProducts\n    }));\n  } else {\n    dispatch(setFavoritesToggled(false));\n    dispatch(getProducts(1));\n  }\n};","map":{"version":3,"names":["setLoading","setProducts","setError","setPagination","setFavorites","setFavoritesToggled","axios","getProducts","page","favoriteToggle","dispatch","data","get","products","pagination","error","response","message","addToFavorites","id","getState","product","favorites","newFavorites","localStorage","setItem","JSON","stringify","removeFromFavorites","filter","favoriteId","toggleFavorites","toggle","filteredProducts","includes","_id"],"sources":["/Users/rizfirman/Documents/perkodingan/Practice/web-shop/client/src/redux/actions/productActions.js"],"sourcesContent":["import { setLoading, setProducts, setError, setPagination, setFavorites, setFavoritesToggled } from '../slices/product';\nimport axios from 'axios';\n\nexport const getProducts = (page, favoriteToggle) => async (dispatch) => {\n  dispatch(setLoading());\n  try {\n    const { data } = await axios.get(`/api/products/${page}/${10}`);\n    const { products, pagination } = data;\n    dispatch(setProducts({ products }));\n    dispatch(setPagination({ pagination }));\n  } catch (error) {\n    dispatch(\n      setError(\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message\n          ? error.message\n          : 'An expected error has occured. Please try again later.'\n      )\n    );\n  }\n};\n\n\nexport const addToFavorites = (id) => async (dispatch, getState) => {\n  const { product: { favorites } } = getState();\n\n  const newFavorites = [...favorites, id];\n  localStorage.setItem('favorites', JSON.stringify(newFavorites));\n  dispatch(setFavorites(newFavorites));\n}\n\nexport const removeFromFavorites = (id) => async (dispatch, getState) => {\n  const { product: { favorites } } = getState();\n\n  const newFavorites = favorites.filter((favoriteId) => favoriteId !== id);\n  localStorage.setItem('favorites', JSON.stringify(newFavorites));\n  dispatch(setFavorites(newFavorites));\n}\nexport const toggleFavorites = (toggle) => async (dispatch, getState) => {\n  const { product: { favorites, products } } = getState();\n\n  if(toggle){\n    const filteredProducts = products.filter((product) => favorites.includes(product._id));\n    dispatch(setFavoritesToggled(toggle));\n    dispatch(setProducts({ products: filteredProducts }));\n  }else{\n    dispatch(setFavoritesToggled(false));\n    dispatch(getProducts(1));\n  }\n\n}\n"],"mappings":"AAAA,SAASA,UAAU,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,aAAa,EAAEC,YAAY,EAAEC,mBAAmB,QAAQ,mBAAmB;AACvH,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,WAAW,GAAGA,CAACC,IAAI,EAAEC,cAAc,KAAK,MAAOC,QAAQ,IAAK;EACvEA,QAAQ,CAACV,UAAU,CAAC,CAAC,CAAC;EACtB,IAAI;IACF,MAAM;MAAEW;IAAK,CAAC,GAAG,MAAML,KAAK,CAACM,GAAG,CAAE,iBAAgBJ,IAAK,IAAG,EAAG,EAAC,CAAC;IAC/D,MAAM;MAAEK,QAAQ;MAAEC;IAAW,CAAC,GAAGH,IAAI;IACrCD,QAAQ,CAACT,WAAW,CAAC;MAAEY;IAAS,CAAC,CAAC,CAAC;IACnCH,QAAQ,CAACP,aAAa,CAAC;MAAEW;IAAW,CAAC,CAAC,CAAC;EACzC,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdL,QAAQ,CACNR,QAAQ,CACNa,KAAK,CAACC,QAAQ,IAAID,KAAK,CAACC,QAAQ,CAACL,IAAI,CAACM,OAAO,GACzCF,KAAK,CAACC,QAAQ,CAACL,IAAI,CAACM,OAAO,GAC3BF,KAAK,CAACE,OAAO,GACbF,KAAK,CAACE,OAAO,GACb,wDACN,CACF,CAAC;EACH;AACF,CAAC;AAGD,OAAO,MAAMC,cAAc,GAAIC,EAAE,IAAK,OAAOT,QAAQ,EAAEU,QAAQ,KAAK;EAClE,MAAM;IAAEC,OAAO,EAAE;MAAEC;IAAU;EAAE,CAAC,GAAGF,QAAQ,CAAC,CAAC;EAE7C,MAAMG,YAAY,GAAG,CAAC,GAAGD,SAAS,EAAEH,EAAE,CAAC;EACvCK,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAACJ,YAAY,CAAC,CAAC;EAC/Db,QAAQ,CAACN,YAAY,CAACmB,YAAY,CAAC,CAAC;AACtC,CAAC;AAED,OAAO,MAAMK,mBAAmB,GAAIT,EAAE,IAAK,OAAOT,QAAQ,EAAEU,QAAQ,KAAK;EACvE,MAAM;IAAEC,OAAO,EAAE;MAAEC;IAAU;EAAE,CAAC,GAAGF,QAAQ,CAAC,CAAC;EAE7C,MAAMG,YAAY,GAAGD,SAAS,CAACO,MAAM,CAAEC,UAAU,IAAKA,UAAU,KAAKX,EAAE,CAAC;EACxEK,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEC,IAAI,CAACC,SAAS,CAACJ,YAAY,CAAC,CAAC;EAC/Db,QAAQ,CAACN,YAAY,CAACmB,YAAY,CAAC,CAAC;AACtC,CAAC;AACD,OAAO,MAAMQ,eAAe,GAAIC,MAAM,IAAK,OAAOtB,QAAQ,EAAEU,QAAQ,KAAK;EACvE,MAAM;IAAEC,OAAO,EAAE;MAAEC,SAAS;MAAET;IAAS;EAAE,CAAC,GAAGO,QAAQ,CAAC,CAAC;EAEvD,IAAGY,MAAM,EAAC;IACR,MAAMC,gBAAgB,GAAGpB,QAAQ,CAACgB,MAAM,CAAER,OAAO,IAAKC,SAAS,CAACY,QAAQ,CAACb,OAAO,CAACc,GAAG,CAAC,CAAC;IACtFzB,QAAQ,CAACL,mBAAmB,CAAC2B,MAAM,CAAC,CAAC;IACrCtB,QAAQ,CAACT,WAAW,CAAC;MAAEY,QAAQ,EAAEoB;IAAiB,CAAC,CAAC,CAAC;EACvD,CAAC,MAAI;IACHvB,QAAQ,CAACL,mBAAmB,CAAC,KAAK,CAAC,CAAC;IACpCK,QAAQ,CAACH,WAAW,CAAC,CAAC,CAAC,CAAC;EAC1B;AAEF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}